

@using DAL


<div class="col-md-12 col-sm-12 col-xs-12">
    <div class="x_panel">
        <div class="x_content">

            @if (ViewBag.ReportTypeDrilDown == 1 || ViewBag.ReportTypeDrilDown == 5 || ViewBag.ReportTypeDrilDown == null)

            {
                <table id="example" class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            @if (ViewBag.ReportType == 1)
                            {
                                <td>City</td>
                                <td>No of Lines</td>
                                <td>Correct Fulfilment Lines</td>
                                <td>Correct Fulfilment %</td>
                                <td>Partial Fulfilment Lines</td>
                                <td>Partial Fulfilment %</td>
                                <td>Pending Fulfilment Lines </td>
                                <td>Pending Fulfilment %</td>
                            }
                            else
                            {
                                <td>City</td>
                                <td>No of Orders</td>
                                <td>Correct Fulfilment Orders</td>
                                <td>Correct Fulfilment %</td>
                                <td>Partial Fulfilment Orders</td>
                                <td>Partial Fulfilment %</td>
                                <td>Pending Fulfilment Orders </td>
                                <td>Pending Fulfilment %</td>
                            }
                        </tr>
                    </thead>
                    <tbody>
                        @if (ViewBag.FinalizedReportsDrildown != null)
                        {
                            int i = 1;
                            foreach (Report2 head in ViewBag.FinalizedReportsDrildown)
                            {
                        <tr>
                            <td>@head.city</td>
                            <td>@head.OYO_Orders</td>
                            <td>@head.rfpl_correct_fullfilled_orders</td>
                            <td>@head.Correct_Fulfilment</td>
                            <td>@head.partial_orders</td>
                            <td>@head.Partial_Fulfilment</td>
                            <td>@head.pending_orders</td>
                            <td>@head.Pending</td>
                                                                                                             
                        </tr>
                                i++;
                            }
                        }
                    </tbody>
                </table>
            }
            else if (ViewBag.ReportTypeDrilDown == 2 || ViewBag.ReportTypeDrilDown == 6 )
            {
                <table id="example" class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            @if (ViewBag.ReportType == 2)
                            {
                                <td>City</td>
                                <td>Total Quantity</td>
                                <td>Correct Fulfilment Quantity</td>
                                <td>Correct Fulfilment %</td>
                                <td>Partial Fulfilment Quantity</td>
                                <td>Partial Fulfilment %</td>
                                <td>Pending Fulfilment Quantity </td>
                                <td>Pending Fulfilment %</td>
                            }
                            else
                            {
                                <td>City</td>
                                <td>Total Quantity</td>
                                <td>Correct Fulfilment Quantity</td>
                                <td>Correct Fulfilment %</td>
                                <td>Partial Fulfilment Quantity</td>
                                <td>Partial Fulfilment %</td>
                                <td>Pending Fulfilment Quantity </td>
                                <td>Pending Fulfilment %</td>
                            }
                        </tr>
                    </thead>
                    <tbody>
                        @if (ViewBag.FinalizedReportsDrildown != null)
                        {
                            int i = 1;
                            foreach (Report2 head in ViewBag.FinalizedReportsDrildown)
                            {
                        <tr>
                            <td>@head.city</td>
                            <td>@head.oyo_order_qty</td>
                            <td>@head.rfpl_order_qty</td>
                            <td>@head.Correct_Fulfilment</td>
                            <td>@head.partial_order_qty</td>
                            <td>@head.Partial_Fulfilment</td>
                            <td>@head.pending_order_qty</td>
                            <td>@head.Pending</td>
                        </tr>
                                i++;
                            }
                        }
                    </tbody>
                </table>
            }
            else if (ViewBag.ReportTypeDrilDown == 3 || ViewBag.ReportTypeDrilDown ==7)
            {
                <table id="example" class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            @if (ViewBag.ReportType == 3)
                            {
                                <td>Item Sub Type</td>
                                <td>No of Lines </td>
                                <td>Correct Fulfilment Lines</td>
                                <td>Correct Fulfilment %</td>
                                <td>Partial Fulfilment Lines</td>
                                <td>Partial Fulfilment %</td>
                                <td>Pending Fulfilment Lines </td>
                                <td>Pending Fulfilment %</td>
                            }
                            else
                            {
                                <td>Item Sub Type</td>
                                <td>No Of Orders </td>
                                <td>Correct Fulfilment Order</td>
                                <td>Correct Fulfilment %</td>
                                <td>Partial Fulfilment Orders</td>
                                <td>Partial Fulfilment %</td>
                                <td>Pending Fulfilment Orders </td>
                                <td>Pending Fulfilment %</td>
                            }
                        </tr>
                    </thead>
                    <tbody>
                        @if (ViewBag.FinalizedReportsDrildown != null)
                        {
                            int i = 1;
                            foreach (Report2 head in ViewBag.FinalizedReportsDrildown)
                            {
                        <tr>
                            <td>@head.Item_Sub_Type</td>
                            <td>@head.OYO_Orders</td>
                            <td>@head.rfpl_correct_fullfilled_orders</td>
                            <td> @head.Correct_Fulfilment</td>
                            <td>@head.partial_orders</td>
                            <td>@head.Partial_Fulfilment</td>
                            <td>@head.pending_orders</td>
                            <td>@head.Pending</td>
                                                                                  
                        </tr>
                                i++;
                            }
                        }
                    </tbody>
                </table>
            }
            else if (ViewBag.ReportTypeDrilDown == 4 || ViewBag.ReportTypeDrilDown == 8)
            {
                <table id="example" class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            @if (ViewBag.ReportType == 4)
                            {
                                <td>Item Sub Type</td>
                                <td>Total Quantity</td>
                                <td>Correct Fulfilment Quantity</td>
                                <td>Correct Fulfilment %</td>
                                <td>Partial Fulfilment Quantity</td>
                                <td>Partial Fulfilment %</td>
                                <td>Pending Fulfilment Quantity </td>
                                <td>Pending Fulfilment %</td>
                            }
                            else
                            {
                                <td>Item Sub Type</td>
                                <td>Total Quantity</td>
                                <td>Correct Fulfilment Quantity</td>
                                <td>Correct Fulfilment %</td>
                                <td>Partial Fulfilment Quantity</td>
                                <td>Partial Fulfilment %</td>
                                <td>Pending Fulfilment Quantity </td>
                                <td>Pending Fulfilment %</td>
                            }
                        </tr>
                    </thead>
                    <tbody>
                        @if (ViewBag.FinalizedReportsDrildown != null)
                        {
                            int i = 1;
                            foreach (Report2 head in ViewBag.FinalizedReportsDrildown)
                            {
                        <tr>
                            <td>@head.Item_Sub_Type</td>
                            <td>@head.oyo_order_qty</td>
                            <td>@head.rfpl_order_qty</td>
                            <td> @head.Correct_Fulfilment</td>
                            <td>@head.partial_order_qty</td>
                            <td>@head.Partial_Fulfilment</td>
                            <td>@head.pending_order_qty</td>
                            <td>@head.Pending</td>



                        </tr>
                                i++;
                            }
                        }
                    </tbody>
                </table>
            }


        </div>
    </div>
    <script>
        $(document).ready(function () {
            $(".loader").hide();
            //t = $('#example').DataTable();
            $("#example").DataTable({
                dom: "Blfrtip",
                buttons: [
                    {
                        extend: "copy",
                        className: "btn-sm"
                    },
                    {
                        extend: "csv",
                        className: "btn-sm"
                    },
                    {
                        extend: "excel",
                        className: "btn-sm"
                    },
                    {
                        extend: "pdfHtml5",
                        className: "btn-sm"
                    },
                    {
                        extend: "print",
                        className: "btn-sm"
                    },
                ],
                responsive: true
            });
     
       
        });
        var table = $('#example').DataTable();
        var ColumnToHighlight = '@ViewBag.ColumnName';
       
        var colIdx = 3;
        if (ColumnToHighlight=='CF') {
            colIdx = 3
        }
        if (ColumnToHighlight=='PF') {
            colIdx = 5
        }
        if (ColumnToHighlight=='P') {
            colIdx = 7
        }
        $(table.cells().nodes()).removeClass('highlight');
        $(table.column(colIdx).nodes()).addClass('highlight');

    </script>
</div>

